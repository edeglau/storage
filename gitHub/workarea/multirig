
meshName=pm.ls(sl=1, fl=1)
mainMesh=[(each) for each in meshName if each.nodeType()=="mesh"]
getDriverObjects=[(each) for each in meshName if each.nodeType()=="mesh"]
grabItems=[]
getSurfaceObj=pm.PyNode(mainMesh[0]).node()
getParentModelTransform=pm.listRelatives(getSurfaceObj, p=1, typ="transform")[0]
grabDriverPoints=[(item) for item in each.vtx for each in getDriverObjects]
pm.select(cl=1)
getRigGrp=pm.group(n=str(getSurfaceObj)+"_Rigs")
pm.select(cl=1)
getRigLocGrp=pm.group(n=str(getSurfaceObj)+"_Locs")
pm.PyNode(getRigLocGrp).visibility.set(0)
pm.select(cl=1)
getRigJntGrp=pm.group(n=str(getSurfaceObj)+"_Jnts")
pm.PyNode(getRigJntGrp).visibility.set(0)
pm.select(cl=1)
getRigCtrlGrp=pm.group(n=str(getSurfaceObj)+"_Ctrl")
pm.select(cl=1)
pm.parent(getRigJntGrp, getRigGrp)
pm.parent(getRigLocGrp, getRigGrp)
pm.parent(getRigCtrlGrp, getRigGrp)
for each in getDriverObjects:
    for grabDriverPoints in each.vts:
        grabItems.append(grabDriverPoints)
for leadVert in getDriverObjects:
    grabDriverPoints=[(each) for each in grabItems if leadVert.getPosition("world")==each.getPosition("world")]
    getUVmap = polyListComponentConversion(each, fv=1, tuv=1)
    getCoords=polyEditUV(getUVmap, q=1)
    plocName=leadVert.split(".")[0]+"_"+str(leadVert.index())+"_ploc"
    getNew=spaceLocator(n=plocName)
    select(leadVert, r=1)
    select(getNew[0], add=1)
    buildConst=pointOnPolyConstraint(leadVert, getNew, mo=0, offset=(0.0, 0.0, 0.0))
    setAttr(buildConst[0]+"."+getObj+"U0", getCoords[0])
    setAttr(buildConst[0]+"."+getObj+"V0", getCoords[1])   
    select(cl=1)
    jointName=str(grabDriverPoints[0].split(".")[0]+"_"+str(leadVert.index())+"_jnt"
    getjoint=joint(n=jointName)
    xform(jointName, ws=1, t=leadVert.getPosition("world"))
    parent(getjoint, getNew)
    getMeshName=grabDriverPoints[0].node()
    skinCluster(jointName, getMeshName)
